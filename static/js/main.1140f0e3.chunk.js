(this.webpackJsonptelia_task=this.webpackJsonptelia_task||[]).push([[0],{18:function(e,t,a){e.exports=a(49)},30:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return Z}));var n,r=a(0),c=a.n(r),i=a(7),o=a.n(i),s=a(5),u=a(3),l=a(14),d=a(2),f=a.n(d),p=a(4),m=a(9),v=(a(30),function(e,t){return Object(u.c)(e,t)}),h=a(1),b={errorMessage:null,inputValidationMessage:null,favoriteCitiesList:[],weather:{current:null,forecast:[]},isLoading:!1};!function(e){e.SetErrorMessage="SetErrorMessage",e.SetInputValidationMessage="SetInputValidationMessage",e.SetCurrentWeather="SetCurrentWeather",e.SetForecast="SetForecast",e.SetFavoriteCitiesList="SetFavoriteCitiesList",e.ResetErrorAndInputMessages="ResetErrorAndInputMessages",e.ResetWeather="ResetWeather",e.SetIsLoading="SetIsLoading"}(n||(n={}));var g,E,w=function(e){return{type:n.SetErrorMessage,payload:e}},O=function(e){return{type:n.SetInputValidationMessage,payload:e}},_=function(e){return{type:n.SetCurrentWeather,payload:e}},y=function(e){return{type:n.SetForecast,payload:e}},j=function(e){return{type:n.SetFavoriteCitiesList,payload:e}},S=function(){return{type:n.ResetErrorAndInputMessages}},N=function(e){return{type:n.SetIsLoading,payload:e}},M="Please enter city name",C="Invalid characters";!function(e){e.Current="weather",e.ForeCast="forecast"}(g||(g={})),function(e){e.FavoritesList="favoritesList"}(E||(E={}));var k=function(e){var t=null;return 0===e.length&&(t=M),/^[a-zA-Z]*$/g.test(e)||(t=C),t&&Z.dispatch(O(t)),t},L=function(e,t){var a=e===g.Current,r="".concat(t).concat(g.Current),c="".concat(t).concat(g.ForeCast),i=sessionStorage.getItem(a?r:c);if(!i){var o="".concat("https://api.openweathermap.org/data/2.5","/").concat(e,"?q=").concat(t,"&units=metric&appid=").concat("6571a8c3adbf87b1faf89aa374bcee12");return fetch(o).then((function(e){return e.json()})).then((function(e){if(200!==Number(e.cod))return Z.dispatch({type:n.ResetWeather}),void Z.dispatch(w(e.message));a?function(e,t){Z.dispatch(_({location:e.name,temp:Math.round(e.main.temp),condition:e.weather[0]})),sessionStorage.setItem(t,JSON.stringify(e))}(e,r):function(e,t){Z.dispatch(y(e.list)),sessionStorage.setItem(t,JSON.stringify(e))}(e,c)})).catch((function(e){return Z.dispatch(w(e))}))}!function(e,t){var a=JSON.parse(e);t?Z.dispatch(_({location:a.name,temp:Math.round(a.main.temp),condition:a.weather[0]})):Z.dispatch(y(a.list))}(i,a)},x=function(e){return new Promise((function(t,a){Promise.all([L(g.Current,e),L(g.ForeCast,e)]).then((function(e){return t(e)})).catch(a)}))},I=a(31),F=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.v4();case 3:return a=e.sent,e.next=6,fetch("http://api.ipstack.com/".concat(a,"?access_key=").concat("447818652d64243c196108b6e7a707d8"));case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,t=null===r||void 0===r?void 0:r.city,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),Z.dispatch(w(e.t0));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.b)(),t=Object(r.useState)(""),a=Object(m.a)(t,2),n=a[0],c=a[1],i=v((function(e){var t;return null===(t=e.weather.current)||void 0===t?void 0:t.location})),o=v((function(e){return e.favoriteCitiesList})),s=v((function(e){return e.inputValidationMessage})),d=v((function(e){return e.errorMessage})),h=null!==s&&void 0!==s?s:d,b=!(!i||!o.includes(i)),g=!!i&&!b,w=function(){var t=Object(p.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),h&&e(S()),!!!k(n)){t.next=5;break}return t.abrupt("return");case 5:return e(N(!0)),r=n.trim(),t.next=9,x(r);case 9:e(N(!1)),c("");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(p.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e(N(!0)),h&&e(S()),t.next=5,F();case 5:return n=t.sent,t.next=8,x(n);case 8:e(N(!1));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.createElement("form",{className:"search-bar"},r.createElement("input",{onChange:function(t){var a=t.target.value;c(a),s&&e(O(""))},type:"text",className:"search-bar__input",value:n,placeholder:"Enter city",autoFocus:!0}),r.createElement("div",{className:"search-bar__buttons"},r.createElement("button",{type:"submit",className:"search-bar__button",onClick:w},"Get Weather"),r.createElement("button",{className:"search-bar__button",onClick:function(t){t.preventDefault(),i&&!b&&(e(j([].concat(Object(l.a)(o),[i]))),localStorage.setItem(E.FavoritesList,JSON.stringify([].concat(Object(l.a)(o),[i]))))},disabled:!g},"Add to Favorites"),r.createElement("button",{className:"search-bar__button",onClick:_},"Current Location")))},V=(a(40),a(41),function(e){return r.createElement("div",{className:"forecast-card"},r.createElement("div",{className:"forecast-card__day"},e.weekday),r.createElement("div",{className:"forecast-card__icon"},r.createElement("i",{className:"wi wi-owm-".concat(e.icon," icon")})),r.createElement("div",{className:"forecast-card__temp"},e.temp,"\xb0"))}),R=a(11),A=function(){var e=v((function(e){return e.weather.forecast})),t=[],a=R().date(),n=e.filter((function(e){var n=R.unix(e.dt).date();return n!==a&&(!(t.indexOf(n)>-1)&&(t.push(n),!0))}));return r.createElement("div",{className:"card-list"},n.map((function(e,t){return r.createElement(V,{key:t,temp:Math.round(e.main.temp),icon:e.weather[0].id,weekday:R(e.dt_txt).format("dddd")})})))},J=(a(43),a(44),a(11)),D=a.n(J),P=function(){var e=v((function(e){return e.weather.current})),t=new Date;return r.createElement("div",{className:"current-weather"},r.createElement("div",{className:"current-weather__date"},D()(t).format("llll")),r.createElement("div",{className:"current-weather__city"},null===e||void 0===e?void 0:e.location),r.createElement("div",{className:"current-weather__weather-info"},r.createElement("div",{className:"current-weather__temp"},r.createElement("span",null,null===e||void 0===e?void 0:e.temp,"\xb0")),r.createElement("div",{className:"current-weather__condition"},r.createElement("div",{className:"current-weather__condition__title"},null===e||void 0===e?void 0:e.condition.main),r.createElement("div",{className:"current-weather__condition__description"},null===e||void 0===e?void 0:e.condition.description))))},q=(a(45),function(){return r.createElement("div",{className:"loader"})}),z=(a(46),function(e){return r.createElement("div",{className:"error-card"},e.errorMessage)}),B=(a(47),function(){var e=Object(u.b)(),t=v((function(e){return e.favoriteCitiesList})),a=v((function(e){var t;return null===(t=e.weather.current)||void 0===t?void 0:t.location})),n=Object(r.useState)(""),c=Object(m.a)(n,2),i=c[0],o=c[1],s=function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target.value,o(r),r===a){t.next=10;break}return e(S()),e(N(!0)),t.next=7,x(r);case 7:e(N(!1)),t.next=11;break;case 10:o("");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.createElement("select",{className:"dropdown",id:"favorites",onChange:function(e){return s(e)},value:i},r.createElement("option",{value:"",disabled:!0,hidden:!0},"Favorite cities:"),t.map((function(e,t){return r.createElement("option",{className:"dropdown__option",key:"".concat(e,"-").concat(t),value:e},e)})))}),G=function(){var e=Object(u.b)(),t=v((function(e){return e.isLoading})),a=v((function(e){return e.weather.current})),n=v((function(e){return e.weather.forecast})),i=v((function(e){return e.favoriteCitiesList})),o=v((function(e){return e.inputValidationMessage})),s=v((function(e){return e.errorMessage})),l=null!==o&&void 0!==o?o:s;return Object(r.useEffect)((function(){var t=localStorage.getItem(E.FavoritesList);t&&e(j(JSON.parse(t)))}),[e]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"weather"},c.a.createElement("header",{className:"weather__header"},"Weather App"),!t&&l&&c.a.createElement(z,{errorMessage:l}),c.a.createElement(W,null),i.length>0&&c.a.createElement(B,null),t&&c.a.createElement(q,null),!t&&!s&&c.a.createElement(c.a.Fragment,null,a&&c.a.createElement(P,null),n.length>0&&c.a.createElement(A,null))))},T=(a(48),a(17)),Z=Object(s.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SetErrorMessage:return Object(h.a)(Object(h.a)({},e),{},{errorMessage:t.payload});case n.SetInputValidationMessage:return Object(h.a)(Object(h.a)({},e),{},{inputValidationMessage:t.payload});case n.SetCurrentWeather:return Object(h.a)(Object(h.a)({},e),{},{weather:Object(h.a)(Object(h.a)({},e.weather),{},{current:t.payload})});case n.SetForecast:return Object(h.a)(Object(h.a)({},e),{},{weather:Object(h.a)(Object(h.a)({},e.weather),{},{forecast:t.payload})});case n.SetFavoriteCitiesList:return Object(h.a)(Object(h.a)({},e),{},{favoriteCitiesList:t.payload});case n.SetIsLoading:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.payload});case n.ResetErrorAndInputMessages:return Object(h.a)(Object(h.a)({},e),{},{errorMessage:null,inputValidationMessage:null});case n.ResetWeather:return Object(h.a)(Object(h.a)({},e),{},{weather:{current:null,forecast:[]}});default:return e}}),Object(T.composeWithDevTools)());o.a.render(c.a.createElement(u.a,{store:Z},c.a.createElement(G,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.1140f0e3.chunk.js.map